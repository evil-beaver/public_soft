<modification>
    <name>Rest API opencart Module</name>
    <version>1.0</version>
    <author>Your Name</author>
    <link>https://yourwebsite.com</link>
    <code>api_order_uninstall</code>

    <!-- Удаляем данные модуля -->
    <file path="admin/model/setting/setting.php">
        <operation>
            <search><![CDATA[public function deleteSetting($code, $store_id = 0) {]]></search>
            <add position="before"><![CDATA[
                public function uninstallModule($code) {
                    // Удаляем файлы данных
                    $data_path = DIR_STORAGE . 'api_data/';
                    if (is_dir($data_path)) {
                        foreach (glob($data_path . '*') as $file) {
                            unlink($file); // Удаляем файлы
                        }
                        rmdir($data_path); // Удаляем папку
                    }

                    // Удаляем настройки модуля
                    $this->db->query("DELETE FROM `" . DB_PREFIX . "setting` WHERE `code` = '" . $this->db->escape($code) . "'");
                }
            ]]></add>
        </operation>
    </file>

    <!-- Удаляем файлы модуля -->
    <file path="admin/controller/extension/module/api_clients.php">
        <operation>
            <remove />
        </operation>
    </file>
    <file path="admin/controller/extension/module/api_order_fields.php">
        <operation>
            <remove />
        </operation>
    </file>
    <file path="catalog/controller/api/order.php">
        <operation>
            <remove />
        </operation>
    </file>
</modification>
